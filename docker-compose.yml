version: '3.9'  # âœ… ä½¿ç”¨ Docker Compose v3.9 èªæ³•ï¼ˆæ”¯æ´æœ€æ–°å±¬æ€§ï¼‰
services:
  frontend:
    build: ./frontend  # ğŸ”§ ä½¿ç”¨ frontend è³‡æ–™å¤¾ä¸‹ Dockerfile å»ºæ§‹ image
    ports:
      - "5173:80"  # ğŸŒ ä¸»æ©Ÿ 5173 å°æ‡‰å®¹å™¨å…§ nginx çš„ 80 port
    depends_on:
      - backend  # â±ï¸ éœ€ç­‰å¾… backend æœå‹™å•Ÿå‹•å®Œæˆå¾Œæ‰å•Ÿå‹• frontend

  
  backend:
    build: ./backend
    ports:
      - "3000:3000" # ğŸŒ ä¸»æ©Ÿ 3000 port âœ å®¹å™¨å…§ Express æœå‹™çš„ 3000 port
    env_file:
      - ./backend/.env # ğŸ“„ è¼‰å…¥ç’°å¢ƒè®Šæ•¸æª”ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰
    depends_on:
      - db  # â±ï¸ éœ€ç­‰ db å•Ÿå‹•å¾Œå†å•Ÿå‹• backend
  db:
    image: postgres:latest
    restart: always
    ports:
      - "5432:5432"  # ğŸ˜ ä¸»æ©Ÿ 5432 port âœ å®¹å™¨ PostgreSQL è³‡æ–™åº«é€£æ¥åŸ 
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: wordscape
    volumes:
      - db_data:/var/lib/postgresql/data # ğŸ’¾ å°‡è³‡æ–™å¤¾æ›åˆ°æœ¬åœ° volumeï¼Œé‡å•Ÿä¹Ÿä¸æœƒéºå¤±è³‡æ–™

volumes:
  db_data:  # âœ… å®£å‘Šåç¨±ç‚º db_data çš„ volumeï¼ˆå­˜åœ¨æ–¼ä¸»æ©Ÿéå®¹å™¨å…§ï¼Œè³‡æ–™æŒä¹…åŒ–ï¼‰